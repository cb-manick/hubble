{
  "$id": "https://hubble.io/schemas/0.1/features.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Specification - feature schema",
  "type": "object",
  "features": {
    "type": "array",
    "description": "Capability specification feature definitions",
    "items": {
      "$ref": "#/definitions/featureDefinition"
    },
    "minItems": 1
  },
  "definitions": {
    "featureDefinition": {
      "oneOf": [
        {
          "type": "string",
          "format": "uri",
          "description": "URI to a resource containing feature definition",
          "minLength": 1
        },
        {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the feature",
              "format": "uri",
              "minLength": 1
            },
            "description": "description of the feature",
            "consumes": {
              "$ref": "#/definitions/consumes"
            },
            "produces": {
              "$ref" : "#/definitions/produces"
            },
            "error": {
              "$ref": "#/definitions/error"
            }
          },
          "required": [
            "id",
            "inputSchemaURI",
            "consumes"
          ]
        }
      ]
    },
    "error": {
      "type": "object",
      "properties": {
        "errorSchemaURI": {
          "type": "string",
          "description": "Schema URI/ open api spec path",
          "minLength": 1
        },
        "produces":{
          "$ref":"#/definitions/transport"
        }
      }
    },
    "transport": {
      "type": "string",
      "enum": [
        "REST",
        "Event"
      ]
    },
    "consumes": {
      "type": "object",
      "properties": {
        "invocationType": {
          "$ref":"#/definitions/transport"
        },
        "inputSchemaURI": {
          "type": "string",
          "description": "Schema URI / open api spec path",
          "format": "uri",
          "minLength": 1
        }
      }
    },
    "produces": {
      "type": "object",
      "properties": {
        "invocationType": {
          "$ref":"#/definitions/transport"
        },
        "outputSchemaURI": {
          "type": "string",
          "description": "Schema URI/ open api spec path",
          "minLength": 1
        }
      }
    }
  }
}